<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.home.model.dao.HousedealsDao">

	<resultMap type="HouseDeals" id="houseDealsMap">
		<id column="id" property="id"/>
		<result column="apt_seq" property="aptSeq"/>
		<result column="apt_dong" property="aptDong"/>
		<result column="floor" property="floor"/>
		<result column="deal_year" property="dealYear"/>
		<result column="deal_month" property="dealMonth"/>
		<result column="deal_day" property="dealDay"/>
		<result column="exdu_use_ar" property="exduUseAr"/>
		<result column="deal_amount" property="dealAmount"/>
	</resultMap>
	
	<!-- 검색어로 특정 아파트 조회 (GET /apartments/search?keyword=?) -->
	<select id="searchApartmentsByName" parameterType="apartmentSearchResponseDto" resultMap="houseDealsMap">
		select 
		apt_seq, 
	    umd_nm, jibun, road_nm, road_nm_bonbun, road_nm_bubun, 
	    apt_nm, 
	    latitude, longitude
		from houseinfos
		where apt_nm like concat('%', #{keyword} , '%');
	</select>
	
</mapper>